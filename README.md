# Unique Server

Это простой websocket-сервер, который принимает входящие соединения по порту 8082 и отправляет в ответ уникальное больше число (big.Int). И такой же простой websocket-клиент, который отправляет N запросов серверу (настраиваемый параметр) с определенным интервалом (настраиваемый параметр) и получает ответ.

Сервер и клиент поднимаются в контейнерах при помощи команд:
```bash
docker-compose build
docker-compose up
```

На стороне сервера реализована проверка IP-адреса входящего соединения. С одного адреса можно установить не более N соединений (настраиваемый параметр). Также можно настроить режим проверки адреса (строгий/нестрогий). При строгом режиме проверяется только IP-адрес. При нестрогом - адрес и порт.

## Параметры конфигурации
Дефолтные значения параметров конфигурации для сервера заданы в файле *./u-server/config.yaml*, для клиента - в *./u-client/config.yaml*
Эти значения можно изменять путем установки соответствующих переменных окружения. В этом случае новые значения перепишут дефолтные, указанные в yaml-файле:
```bash
export U_CLIENT_CONN_CNT=50
```

### Конфигурация сервера
| Название в yaml-файле | Название ENV          | Описание                                                                         | Значение по умолчанию |
|-----------------------|-----------------------|---------------------------------------------------------------------------------|------------------------|
| port                  | U_SERVER_PORT         | Номер порта для соединения с сервером                                           | 8082                   |
| endpoint              | U_SERVER_ENDPOINT     | Имя эндпоинта                                                                   | "/wss"                 |
| strictMode            | U_SERVER_STRICT_MODE  | Режим проверки IP-адреса. Строгий (on) - только IP, нестрогий (off) - IP и порт | "off"                  |
| maxIpConnection       | U_SERVER_MAX_IP_CONN  | Максимальное количество соединений с одного IP-адреса                           | 1                      |
| timeout               | U_SERVER_TIMEOUT      | Таймаут для входящего соединения в миллисекундах                                | 5000                   |
| serviceName           | U_SERVER_SERVICE_NAME | Имя сервиса для отображения в логах                                             | "u-server"             |
| logLevel              | U_SERVER_LOG_LEVEL    | Уровень логирования                                                             | "Debug"                |

### Конфигурация клиента
| Название в yaml-файле    | Название ENV               | Описание                                                 | Значение по умолчанию  |
|--------------------------|----------------------------|----------------------------------------------------------|------------------------|
| port                     | U_CLIENT_PORT              | Номер порта для соединения с сервером                    | 8082                   |
| endpoint                 | U_CLIENT_ENDPOINT          | Имя эндпоинта сервера                                    | "/wss"                 |
| connectionCnt            | U_CLIENT_CONN_CNT          | Количество соединений с сервером                         | 10                     |
| connectionInterval       | U_CLIENT_CONN_INTERVAL     | Интервал между соединениями в миллисекундах              | 100                    |
| timeout                  | U_CLIENT_TIMEOUT           | Таймаут для получения ответа от сервера в миллисекундах  | 5000                   |
| serviceName              | U_CLIENT_SERVICE_NAME      | Имя сервиса для отображения в логах                      | "u-client"             |
| logLevel                 | U_CLIENT_LOG_LEVEL         | Уровень логирования                                      | "Debug"                |
